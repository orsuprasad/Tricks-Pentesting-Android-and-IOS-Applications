...
## Android applications
### Architecture
<a href="https://developer.android.com/static/guide/platform/images/android-stack_2x.png">
    <img  height="650em" src="https://developer.android.com/static/guide/platform/images/android-stack_2x.png" />
</a>

### Components
Activities - show screens to the user and allow them to interact with those screens  
e.g.  
`am start -n <package_name>/<package_name>.<activity_name>`  

-> Create malicious app and call activity:  
```
Intent intent = new Intent();
intent.setClassName("<package_name>", "<package_name>.<activity_name>");
startActivity(intent);
```
Services - tasks that run in the background  
e.g.  
`am startservice -n <package_name>/<package_name>.<service_name>`  

Broadcast Receiver - operating system notifications   
e.g.  
`am broadcast -a android.intent.action.BOOT_COMPLETED`  

Content Provider - share information with other applications  
e.g.  
`content query --uri content://sms/sent`  

Create malicious app and call content provider:
```
Uri uri = Uri.parse("content://com.example.myapplication/ok.txt");
ContentResolver cr = getContentResolver();
Cursor c = cr.query(uri, cols, null, null, null);
```

### Proccess of Compiling
JVM - Java Virtual Machine  
.java -> javac(compiler)-> .class (bytecode)  

DVM - Dalvik Virtual Machine   
.java -> javac(compiler) -> .class(bytecode) -> dx(compiler) -> .dex(bytecode)  

ART - Android Runtime  
.java -> javac(compiler) -> .class(bytecode) -> dx(compiler) -> .dex(bytecode) -> dex2oat > native binary  

### Structure of an apk
AndroidManifest.xml - package name, permissions, components  
META-INF - app metadata  
classes.dex - binary dalvik byte code, contains the current application code  
res - resources used by the app  
resources.arsc -  android app resource file  

## Android Basics
### Debug Bridge  
-> Connect ADB  
`adb connect ip:5037`  
`adb shell`  
